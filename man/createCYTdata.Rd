% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/2_Files.R
\name{createCYTdata}
\alias{createCYTdata}
\title{Create CYTdata Object}
\usage{
createCYTdata(
  files = NULL,
  data = NULL,
  format = c("fcs", "data.frame"),
  channels,
  Ndownsampling = NULL,
  ...
)
}
\arguments{
\item{files}{A character vector containing paths to FCS files. Required if the format is set to 'fcs'.}

\item{data}{A data.frame containing the cytometry data. Required if the format is set to 'data.frame'.}

\item{format}{A string specifying the format of the input data. Can either be "fcs" (for FCS files) or "data.frame" (for an existing data frame). Default is 'fcs'.}

\item{channels}{A character vector specifying the channel names to retain from the input data.}

\item{Ndownsampling}{An integer specifying the number of events (cells) to downsample to for each FCS file. If NULL, no downsampling is performed. Default is NULL.}

\item{...}{Additional arguments passed to the `flowCore::read.FCS` function when importing FCS files.}
}
\value{
A CYTdata object containing the processed cytometry data and metadata.
The object contains:
- `cellData`: Expression data for each cell.
- `sampleData`: Metadata for each sample.
- `clusteringData`: Empty data frame (reserved for future clustering results).
}
\description{
This function processes cytometry data from FCS files or a data frame to create a CYTdata object,
which is a standardized format used for downstream analysis, such as clustering or statistical tests.
The function allows users to specify channels to retain, perform optional downsampling, and validate the input data.
}
\details{
If the `format` argument is set to `"fcs"`, the function reads FCS files and processes them based on the specified channels.
It also performs optional downsampling to a specified number of events per file. Missing channels are filled with NA values,
and warnings are issued when channels are missing.

If the `format` argument is set to `"data.frame"`, the function processes the provided data frame, ensuring that it contains
the required columns (`SampleID` and `CellID`). It samples up to 1000 cells per sample and splits the data into expression
values (`cellExprs`) and sample metadata (`cellSample`).

The resulting CYTdata object can be used for further analysis, such as clustering or statistical tests.
}
\examples{
# Example using FCS files
fcs_files <- c("sample1.fcs", "sample2.fcs")
channels_to_keep <- c("FSC-A", "SSC-A", "CD3")
cyt_data <- createCYTdata(files = fcs_files, format = "fcs", channels = channels_to_keep, Ndownsampling = 500)

# Example using a data frame
df <- data.frame(SampleID = rep(c("Sample1", "Sample2"), each = 1000),
                 CellID = rep(1:1000, 2),
                 FSC_A = rnorm(2000), SSC_A = rnorm(2000), CD3 = rnorm(2000))
cyt_data <- createCYTdata(data = df, format = "data.frame", channels = c("FSC_A", "SSC_A", "CD3"))

}
\seealso{
\code{\link[flowCore]{read.FCS}} for reading FCS files.
\code{\link{checkValidity}} for validating the CYTdata object.
}
